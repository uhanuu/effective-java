# π€ Item 21 μΈν„°νμ΄μ¤λ” κµ¬ν„ν•λ” μ½μ„ μƒκ°ν•΄ μ„¤κ³„ν•λΌ

β­οΈ μΈν„°νμ΄μ¤μ μ¤‘μ”μ„±

μΈν„°νμ΄μ¤λ” μλ°”μ ν•µμ‹¬ κΈ°λ¥ μ¤‘ ν•λ‚λ΅, λ‹¤ν•μ„±μ„ κµ¬ν„ν•λ” λ° ν•„μμ μ…λ‹λ‹¤. μΈν„°νμ΄μ¤λ¥Ό ν†µν•΄ μ‚¬μ©μλ” λ‹¤μ–‘ν• κµ¬ν„μ²΄λ¥Ό κ°™μ€ λ°©λ²•μΌλ΅ λ‹¤λ£° μ μμµλ‹λ‹¤. ν•μ§€λ§, μΈν„°νμ΄μ¤λ¥Ό μ„¤κ³„ν•  λ•λ” μ΄λ¥Ό μ‚¬μ©ν•  κ°λ°μμ μ…μ¥μ—μ„ μ¶©λ¶„ν κ³ λ―Όν•΄μ•Ό ν•©λ‹λ‹¤. μλ» μ„¤κ³„λ μΈν„°νμ΄μ¤λ” κ°λ°μμ—κ² νΌλ€μ„ μ£Όκ³ , μ½”λ“μ μ μ§€λ³΄μμ„±μ„ λ–¨μ–΄νΈλ¦΄ μ μμµλ‹λ‹¤.


## π“ μΈν„°νμ΄μ¤ μ„¤κ³„μ μ›μΉ™

μΈν„°νμ΄μ¤λ¥Ό μ„¤κ³„ν•  λ•λ” λ‹¤μκ³Ό κ°™μ€ μ›μΉ™μ„ λ”°λ¥΄λ” κ²ƒμ΄ μΆ‹μµλ‹λ‹¤:

1. **λ…ν™•ν•κ³  κ°„κ²°ν•κ²**: μΈν„°νμ΄μ¤λ” μ‚¬μ©μκ°€ μ‰½κ² μ΄ν•΄ν•κ³  μ‚¬μ©ν•  μ μλ„λ΅ λ…ν™•ν•κ³  κ°„κ²°ν•΄μ•Ό ν•©λ‹λ‹¤.
2. **ν™•μ¥μ„±μ„ κ³ λ ¤ν•μ—¬**: μ‹κ°„μ΄ μ§€λ‚λ„ μΈν„°νμ΄μ¤λ¥Ό μ‰½κ² ν™•μ¥ν•  μ μλ„λ΅ μ„¤κ³„ν•΄μ•Ό ν•©λ‹λ‹¤.
3. **λ””ν΄νΈ λ©”μ„λ“ μ‚¬μ©μ— μ£Όμ**: μλ°” 8λ¶€ν„° μΈν„°νμ΄μ¤μ— λ””ν΄νΈ λ©”μ„λ“λ¥Ό μ¶”κ°€ν•  μ μκ² λμ—μµλ‹λ‹¤. μ΄λ” ν™•μ¥μ„±μ„ λ†’μ—¬μ£Όμ§€λ§, μ‹ μ¤‘ν•κ² μ‚¬μ©ν•΄μ•Ό ν•©λ‹λ‹¤.

μλ°” 8μ „μ—λ” κΈ°μ΅΄ κµ¬ν„μ²΄λ¥Ό κΉ¨λ“λ¦¬μ§€ μ•κ³ λ” μΈν„°νμ΄μ¤μ— λ©”μ„λ“λ¥Ό μ¶”κ°€ν•  λ°©λ²•μ΄ μ—†μ—μµλ‹λ‹¤. 
 - μΈν„°νμ΄μ¤μ— λ©”μ„λ“λ¥Ό μ¶”κ°€ν•λ©΄ λ³΄ν†µμ€ μ»΄νμΌ μ¤λ¥κ°€ λ‚λ”λ°, μ¶”κ°€λ λ©”μ„λ“κ°€ μ°μ—°ν κΈ°μ΅΄ κµ¬ν„μ²΄μ— μ΄λ―Έ μ΅΄μ¬ν•  κ°€λ¥μ„±μ€ μ•„μ£Ό λ‚®κΈ° λ•λ¬Έμ…λ‹λ‹¤.
 
μλ°” 8μ— μ™€μ„ κΈ°μ΅΄ μΈν„°νμ΄μ¤μ— λ©”μ„λ“λ¥Ό μ¶”κ°€ν•  μ μλ„λ΅ λ””ν΄νΈ λ©”μ„λ“λ¥Ό μ†κ°ν–μ§€λ§ μ„ν—μ΄ μ™„μ „ν μ‚¬λΌμ§„ κ²ƒμ€ μ•„λ‹™λ‹λ‹¤. 

**β“μ–΄λ–¤ μ„ν—μ΄ μμ„κΉ?**

λ””ν΄νΈ λ©”μ„λ“λ¥Ό μ¬μ •μν•μ§€ μ•μ€ λ¨λ“  ν΄λμ¤μ—μ„ λ””ν΄νΈ κµ¬ν„μ΄ μ“°μ΄κ² λλ―€λ΅ λ¨λ“  κΈ°μ΅΄ κµ¬ν„μ²΄λ“¤κ³Ό λ§¤λ„λ½κ² μ—°λ™λλ¦¬λΌλ” λ³΄μ¥μ„ ν•  μ μ—†μµλ‹λ‹¤.


>μλ°” 8μ Collection μΈν„°νμ΄μ¤μ— μ¶”κ°€λ λ””ν΄νΈ λ©”μ„λ“
```java
default boolean removeIf(Predicate<? super E> filter) {
  Objects.requireNonNull(filter);
  boolean result = false;
  for(Iterator<E> it = iterator(); it.hasNext();) {
    if(filter.test(it.next())) {
      it.remove();
      result = true;
    }
  }

  return result;
}


```

μΈμλ΅ Predicateλ¥Ό λ°›μ•„ trueλ¥Ό λ°ν™ν•λ” λ¨λ“  μ›μ†λ¥Ό μ κ±°ν•©λ‹λ‹¤.

μ•„νμΉμ—μ„ μ κ³µν•λ”Β `org.apache.commons.collections4.collection.SynchronizedCollection`μ€ ν΄λΌμ΄μ–ΈνΈκ°€ μ κ³µν• κ°μ²΄λ΅ λ½μ„ κ±°λ” λ¥λ ¥μ„ μ¶”κ°€λ΅ μ κ³µν•λ‹¤. λ¨λ“  λ©”μ„λ“μ—μ„ μ£Όμ–΄μ§„ λ½ κ°μ²΄λ΅ λ™κΈ°ν™”ν• ν›„ λ‚΄λ¶€ μ»¬λ ‰μ… κ°μ²΄μ— κΈ°λ¥μ„ μ„μ„ν•λ”Β **λνΌ ν΄λμ¤**μ…λ‹λ‹¤.

μ•„νμΉμΒ `SynchronizedCollection`μ€ removeIfλ¥Ό μ¬μ •μν•κ³  μμ§€ μ•μµλ‹λ‹¤. μ΄ ν΄λμ¤λ¥Ό μλ°” 8κ³Ό ν•¨κ» μ‚¬μ©ν•λ‹¤λ©΄ λ””ν΄νΈ λ©”μ„λ“μΈ removeIfμ λ””ν΄νΈ κµ¬ν„μ„ λ¬Όλ ¤λ°›κ² λλ©°, λ¨λ“  λ©”μ„λ“μ— λ€ν• νΈμ¶μ„ μ•μ•„μ„ λ™κΈ°ν™”ν•΄μ£Όμ§€ λ»ν•©λ‹λ‹¤. removeIfμ κµ¬ν„μ€ λ™κΈ°ν™”λ‚ λ½ κ°μ²΄μ— λ€ν•΄ μ•„λ¬΄κ²ƒλ„ λ¨λ¥΄κ³  μκΈ° λ•λ¬Έμ…λ‹λ‹¤.

λ”°λΌμ„ SynchronizedCollection μΈμ¤ν„΄μ¤λ¥Ό μ—¬λ¬ μ¤λ λ“κ°€ κ³µμ ν•λ” ν™κ²½μ—μ„ ν• μ¤λ λ“κ°€ removeIfλ¥Ό νΈμ¶ν•λ©΄Β `ConcurrentModificationException`μ΄ λ°μƒν•©λ‹λ‹¤. λ””ν΄νΈ λ©”μ„λ“λ”Β `μ»΄νμΌμ— μ„±κ³µν•λ‹¤κ³  ν•΄λ„ κΈ°μ΅΄ κµ¬ν„μ²΄μ— λ°νƒ€μ„ μ¤λ¥λ¥Ό μΌμΌν‚¬ μ μλ” κ²ƒμ΄λ‹¤`.
## λ””ν΄νΈ λ©”μ„λ“λ¥Ό μ¶”κ°€ν•΄μ•Όν•  λ•

κΈ°μ΅΄ μΈν„°νμ΄μ¤μ— λ””ν΄νΈ λ©”μ„λ“λ΅ μƒ λ©”μ„λ“λ¥Ό μ¶”κ°€ν•λ” μΌμ€ κΌ­ ν•„μ”ν• κ²½μ°κ°€ μ•„λ‹λ©΄ ν”Όν•΄μ•Όλ§ ν•©λ‹λ‹¤. μ¶”κ°€ν•  λ• κΈ°μ΅΄ κµ¬ν„μ²΄λ“¤κ³Ό μ¶©λν•μ§€ μ•μ„μ§€λ„ κ³ λ ¤ν•΄μ•Όν•©λ‹λ‹¤.

λ°λ©΄, μƒλ΅μ΄ μΈν„°νμ΄μ¤λ¥Ό λ§λ“λ” κ²½μ°λΌλ©΄ ν‘μ¤€μ μΈ λ©”μ„λ“ κµ¬ν„μ„ μ κ³µν•λ” λ° μ•„μ£Ό μ μ©ν• μλ‹¨μ΄λ©°, κ·Έ μΈν„°νμ΄μ¤λ¥Ό λ” μ‰½κ² κµ¬ν„ν•΄ ν™μ©ν•  μ μκ²λ” ν•΄μ¤λ‹λ‹¤.

κ·Έλ ‡λ‹¤κ³  μΈν„°νμ΄μ¤ μ„¤κ³„ μ‹ μ•„λ¬΄ κ³ λ―Ό μ—†μ΄ λ””ν΄νΈ λ©”μ„λ“λ¥Ό μ¶”κ°€ν•λΌλ” κ²ƒμ€ μ•„λ‹™λ‹λ‹¤. μΈν„°νμ΄μ¤ μ„¤κ³„μ—λ” μ—¬μ „ν μ„Έμ‹¬ν• μ£Όμκ°€ ν•„μ”ν•λ©° λ¦΄λ¦¬μ¦ μ΄μ „μ— λ°λ“μ‹ κΌΌκΌΌν• ν…μ¤νΈλ¥Ό κ±°μ³μ•Ό λ§ ν•©λ‹λ‹¤.
