## ğŸ¤” í´ë˜ìŠ¤ ìƒì†... ì¢‹ì§€ë§Œì€ ì•Šë‹¤...?
- ìƒì†ì€ ì½”ë“œë¥¼ ```ì¬ì‚¬ìš©```í•˜ê¸° ìœ„í•œ ê°•ë ¥í•œ ìˆ˜ë‹¨ì´ë‹¤.
- ê°™ì€ í”„ë¡œê·¸ë˜ë¨¸ê°€ í†µì œí•˜ëŠ” íŒ¨í‚¤ì§€ ì•ˆì—ì„œì˜ ìƒì†ì€ ë§¤ìš° ì•ˆì „í•˜ë‹¤.
- í•˜ì§€ë§Œ íŒ¨í‚¤ì§€ ê²½ê³„ë¥¼ ë„˜ì–´ ë‹¤ë¥¸ í´ë˜ìŠ¤ë¥¼ ìƒì†í•˜ëŠ” ì¼(êµ¬í˜„ ìƒì†)ì€ ë§¤ìš° ìœ„í—˜í•˜ë‹¤.

ì–´ë– í•œ ë¶€ë¶„ì—ì„œ ìœ„í—˜í•˜ë©° ì–´ë–¤ ë‹¨ì ì´ ìˆëŠ”ì§€ ì•Œì•„ë³´ì.

## ğŸ˜¥ ìƒì†ì˜ ë‹¨ì 
### 1. ìƒì†ì€ ìº¡ìŠí™”ë¥¼ ê¹¨íŠ¸ë¦°ë‹¤. 
- ìƒìœ„ í´ë˜ìŠ¤ê°€ ì–´ë–»ê²Œ êµ¬í˜„ë˜ëŠëƒì— ë”°ë¼ í•˜ìœ„ í´ë˜ìŠ¤ì˜ ë™ì‘ì— ì´ìƒì´ ìƒê¸¸ ìˆ˜ ìˆë‹¤.
- ìƒìœ„í´ë˜ìŠ¤ê°€ ë¦´ë¦¬ìŠ¤ë§ˆë‹¤ ë³€ê²½ì´ ë°œìƒí•œë‹¤ë©´ í•˜ìœ„í´ë˜ìŠ¤ë„ ìƒìœ„ í´ë˜ìŠ¤ì˜ ë³€ê²½ì— ë§ì¶° ìˆ˜ì •í•´ì¤˜ì•¼ í•œë‹¤.

#### ì˜ˆì‹œ
```java
public class InstrumentedHashSet<E> extends HashSet<E> {
    // ì¶”ê°€ëœ ì›ì†Œì˜ ìˆ˜
    private int addCount = 0;

    public InstrumentedHashSet() {
    }

    public InstrumentedHashSet(int initCap, float loadFactor) {
        super(initCap, loadFactor);
    }

    @Override
    public boolean add(E e) {
        addCount++;
        return super.add(e);
    }

    @Override
    public boolean addAll(Collection<? extends E> c) {
        addCount += c.size();
        return super.addAll(c);
    }

    public int getAddCount() {
        return addCount;
    }

    public static void main(String[] args) {
        final InstrumentedHashSet<Object> s = new InstrumentedHashSet<>();
        s.addAll(List.of("ì¼", "ì´", "ì‚¼"));
        System.out.println(s.getAddCount());      //ì˜ˆìƒ ê²°ê³¼ : 3
                                                // ì‹¤ì œ ì¶œë ¥ ê²°ê³¼ : 6
    }
}
```
- HashSetì„ ìƒì†í•œ InstrumentedHashSet í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ê³  ë©”ì„œë“œëŠ” superë¥¼ ì´ìš©í•´ì„œ HashSetì˜ ë©”ì„œë“œë¥¼ ìˆ˜í–‰í•˜ê³  ìˆë‹¤.
- InstrumentedHashSetì•ˆì— ì›ì†Œ 3ê°œë¥¼ ë„£ê³  getAddCountìœ¼ë¡œ ì›ì†Œì˜ ê°œìˆ˜ë¥¼ í™•ì¸í•´ë³´ì•˜ë‹¤.
- ê·¸ ê²°ê³¼, ì›ì†Œ 3ê°œë¥¼ ë„£ì€ ê²ƒê³¼ ë‹¬ë¦¬ ë°˜í™˜ê°’ì„ 6ì„ ë°˜í™˜í•˜ê³  ìˆë‹¤.

#### ì–´ëŠ ë¶€ë¶„ì´ ë¬¸ì œì˜€ì„ê¹Œ?
```java

@Override
public boolean addAll(Collection<? extends E> c) {
    addCount += c.size();
    return super.addAll(c);        //HashSetì—ëŠ” addAll()ì´ ì—†ì–´ ìƒìœ„ ê°ì²´ì¸ AbstractCollectionì˜ addAll ìˆ˜í–‰
}

//AbstractCollectionì˜ addAll
public boolean addAll(Collection<? extends E> c) {
    boolean modified = false;
    for (E e : c)
        if (add(e))               //ê° ì›ì†Œë§ˆë‹¤ add() ìˆ˜í–‰
            modified = true;
    return modified;
}
```
- addAllì˜ super.addAllì„ ì‹¤í–‰í•˜ë©´ HashSetì—ëŠ” addAll()ê°€ ì¡´ì¬í•˜ì§€ ì•Šì•„ ìƒìœ„ ê°ì²´ì¸ AbstractCollectionì˜ addAllì„ ì‹¤í–‰í•˜ê²Œ ëœë‹¤.
- AbstractCollectionì˜ addAllì„ ì‹¤í–‰í•˜ê²Œ ë˜ë©´ ê·¸ë¦¼ê³¼ ê°™ì´ ê° ì›ì†Œë§ˆë‹¤ add()ë¥¼ ìˆ˜í–‰í•˜ê²Œ ëœë‹¤.
- ê·¸ë˜ì„œ ```addCount += c.size();```ìœ¼ë¡œ ì¸í•´ count í›„,  ```add(e)``` ë¡œ ì¸í•´ í•œë²ˆ ë” ì¶”ê°€ë˜ì–´ 6ì´ ë‚˜ì˜¨ ê²ƒì´ë‹¤.

#### ê·¸ë ‡ë‹¤ë©´ ì´ ë¬¸ì œë¥¼ ì–´ë–»ê²Œ í•´ê²°í•  ìˆ˜ ìˆì„ê¹Œ?
#### ë°©ì•ˆ 1
- ê°„ë‹¨í•˜ê²Œ InstrumentedHashSetì—ì„œ addAllì„ ì¬ì •ì˜í•˜ì§€ ì•Šìœ¼ë©´ ëœë‹¤.

í•˜ì§€ë§Œ ì´ ë°©ì•ˆì€ ìƒìœ„ í´ë˜ìŠ¤ì¸ **HashSetì—ì„œ HashAll()ì„ addë©”ì„œë“œë¥¼ ì´ìš©í•´ ì¬ì •ì˜ í–ˆì„ë•Œ** ê°€ëŠ¥í•œ í•´ê²°ë°©ë²•ì´ë‹¤.

#### ë°©ì•ˆ 2
- addAll ë©”ì„œë“œë¥¼ ë‹¤ë¥¸ ë°©ì‹ìœ¼ë¡œ InstrumentedHashSetì˜ addAllì²˜ëŸ¼ ì¬ì •ì˜í•  ìˆ˜ ë„ ìˆë‹¤.
- AbstractCollectionì˜ addAllì„ ë” ì´ìƒ í˜¸ì¶œí•˜ì§€ ì•Šì•„ì„œ ì˜¬ë°”ë¥¸ ê²°ê³¼ë¥¼ ë§Œë“¤ì–´ ë‚¼ ìˆ˜ ìˆë‹¤ëŠ” ì ì—ì„œ í•´ë²•ì´ ë  ìˆ˜ ìˆë‹¤.

í•˜ì§€ë§Œ ì´ ë°©ì•ˆì€ ìƒìœ„ í´ë˜ìŠ¤ì˜ ë©”ì„œë“œë¥¼ ë‹¤ì‹œ êµ¬í˜„í•˜ëŠ” ê²ƒì´ì—¬ì„œ ```ì–´ë µê³ , ìì¹« ì˜¤ë¥˜ë¥¼ ë‚´ì–´ ì„±ëŠ¥ì„ ë–¨ì–´ëœ¨ë¦´ ìˆ˜ ìˆë‹¤.```

### 2. ìƒìœ„ í´ë˜ìŠ¤ì— ìƒˆë¡œìš´ ë©”ì„œë“œë¥¼ ì¶”ê°€í–ˆì„ë•Œ ë¬¸ì œê°€ ë°œìƒí•œë‹¤.
ë‹¤ìŒê³¼ ê°™ì€ ìƒí™©ì´ ìˆë‹¤ê³  ê°€ì •í•´ë³´ì.

#### ê°€ì • 1 : ë‹¤ìŒ ë¦´ë¦¬ìŠ¤ì—ì„œ ìƒìœ„ í´ë˜ìŠ¤ì—ì„œ ìƒˆë¡œìš´ ë©”ì„œë“œë¥¼ ì¶”ê°€í–ˆì„ë•Œ
- ê·¸ëŸ¬ë©´ í•˜ìœ„í´ë˜ìŠ¤ì—ì„œ ì¬ì •ì˜ í•˜ì§€ ëª»í•œ ìƒˆë¡œìš´ ë©”ì„œë“œë¡œ ```í—ˆìš©ë˜ì§€ ì•ŠëŠ” ì›ì†Œ```ë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆê²Œ ëœë‹¤.

#### ê°€ì • 2 : ìƒìœ„ í´ë˜ìŠ¤ì— ì¶”ê°€í•œ ë©”ì„œë“œê°€ í•˜ìœ„ í´ë˜ìŠ¤ì˜ ë©”ì„œë“œì™€ ì´ë¦„ì´ ê°™ê±°ë‚˜ ë°˜í™˜íƒ€ì… ë§ˆì € ê°™ì„ë•Œ
- ì´ë¦„ë§Œ ê°™ë‹¤ë©´, ì»´íŒŒì¼ì´ ë˜ì§€ ì•Šì„ ê²ƒì´ë‹¤.
- ì´ë¦„ê³¼ ë°˜í™˜íƒ€ì… ëª¨ë‘ ê°™ë‹¤ë©´, ë©”ì„œë“œë¥¼ ì¬ì •ì˜ í•˜ëŠ” ê¼´ì´ ë  ê²ƒì´ë‹¤.

### 3. ìƒìœ„ í´ë˜ìŠ¤ì˜ ê²°í•¨ì„ í•˜ìœ„í´ë˜ìŠ¤ë¡œ ì „íŒŒ ì‹œí‚¬ ìˆ˜ ìˆë‹¤.
- ìƒìœ„ í´ë˜ìŠ¤ì— ê²·í•¨ì´ ìˆëŠ” ìƒíƒœì—ì„œ ìƒì†ì„ í•˜ë©´ ê²°í•¨ ë˜í•œ ìŠ¹ê³„í•œë‹¤.

### 4. ë‚´ë¶€ êµ¬í˜„ì„ ë…¸ì¶œí•˜ê²Œ ëœë‹¤.
- APIê°€ ë‚´ë¶€ êµ¬í˜„ì— ë¬¶ì´ê²Œ ë˜ì–´ í´ë˜ìŠ¤ ì„±ëŠ¥ì„ ì œí•œí•˜ê²Œ í•œë‹¤.
- ë…¸ì¶œëœ ë‚´ë¶€ì— ì§ì ‘ ì ‘ê·¼ì„ í—ˆìš©í•˜ê²Œ í•œë‹¤.

> ì •ë¦¬í•´ë³´ë©´<br>
> 1ï¸âƒ£. ìƒì†ì€ ìº¡ìŠí™”ë¥¼ ê¹¨íŠ¸ë¦¬ê³  <br>
> 2ï¸âƒ£. ê²°í•¨ì„ í•˜ìœ„í´ë˜ìŠ¤ë¡œ ì „íŒŒ ì‹œí‚¬ìˆ˜ ìˆìœ¼ë©° <br>
> 3ï¸âƒ£. ìƒì† í›„ì—ë„ ë©”ì„œë“œë¥¼ ì¶”ê°€í•˜ëŠ” ê³¼ì •ì—ì„œ ë¬¸ì œê°€ ë°œìƒí•œë‹¤.<br>


## âœ…  ìƒì†ë³´ë‹¤ëŠ”  ì»´í¬ì§€ì…˜ì„ ì‚¬ìš©í•˜ì.
- ìœ„ì—ì„œ ë§í•œ ë‹¨ì ë“¤ì„ ë‹¤ í•´ê²°í•˜ë©´ì„œ ì½”ë“œë¥¼ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë°©ë²•ìœ¼ë¡œ ```ì»´í¬ì§€ì…˜(composition)```ì´ ìˆë‹¤.

### ì»´í¬ì§€ì…˜ì´ë€?
- ê¸°ì¡´ í´ë˜ìŠ¤ê°€ ìƒˆë¡œìš´ í´ë˜ìŠ¤ì˜ ```êµ¬ì„±ìš”ì†Œ```ë¡œ ë“¤ì–´ê°€ë„ë¡ ì„¤ê³„í•˜ëŠ” ê²ƒì„ ë§í•œë‹¤.
- ìƒˆë¡œìš´ í´ë˜ìŠ¤ë¥´ ë§Œë“¤ê³  private í•„ë“œë¡œ ê¸°ì¡´ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì°¸ì¡°í•˜ê²Œ í•˜ë©´ ëœë‹¤. ()

### ì»´í¬ì§€ì…˜  ì˜ˆì‹œ
```java
public class InstrumentedSet<E> extends ForwardingSet<E> {      // ì§‘í•© í´ë˜ìŠ¤ (ìì‹ )
    private int addCount = 0;

    public InstrumentedSet(Set<E> s) {
        super(s);
    }
    ...
}

public class ForwardingSet<E> implements Set<E> {                    //ì „ë‹¬ í´ë˜ìŠ¤
    private final Set<E> s;                                         //ì»´í¬ì§€ì…˜ : privateìœ¼ë¡œ Set ê°ì²´ êµ¬ì„±
    public ForwardingSet(Set<E> s) { this.s = s; }

    public void clear()               { s.clear(); }    //ì „ë‹¬ ë©”ì„œë“œ (forwarding Method)
    public boolean contains(Object o) { return s.contains(o); }
    public boolean isEmpty()          { return s.isEmpty(); }
    ....
}
```
- ìƒˆ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œë“¤ì€ ê¸°ì¡´ í´ë˜ìŠ¤ì˜ ëŒ€ì‘í•˜ëŠ” ë©”ì„œë“œë¥¼ í˜¸ì¶œí•´ ê·¸ ê²°ê³¼ë¥¼ ë°˜í™˜í•œë‹¤. (```ì „ë‹¬(forwarding)```)
- ì´ëŸ¬í•œ ì „ë‹¬ë¡œ êµ¬ì„±í•œ ë©”ì„œë“œë¥¼ ```ì „ë‹¬ ë©”ì„œë“œ```ë¼ê³  í•˜ë©°, ìƒˆ í´ë˜ìŠ¤ëŠ” ì´ ë©”ì„œë“œë¡œ êµ¬ì„±ëœë‹¤.

<p align="center">
<img width="500" alt="image" src="https://github.com/kim0527/Effective-Java/assets/143387515/4888a14f-5a9d-46dd-9248-9751aad5b7c6">
</p>

- ì½”ë“œëŠ” **ì§‘í•© í´ë˜ìŠ¤**ì™€ ì „ë‹¬ ë©”ì„œë“œë§Œìœ¼ë¡œ ì´ë¤„ì§„ **ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì „ë‹¬í´ë˜ìŠ¤**ë¡œ ë‚˜ëˆ ë³¸ ê²ƒìœ¼ë¡œ ê·¸ë¦¼ìœ¼ë¡œ ë³´ë©´ ìœ„ì™€ ê°™ë‹¤.

### ì»´í¬ì§€ì…˜ ì¥ì 
1. ê¸°ì¡´ í´ë˜ìŠ¤ì˜ ë‚´ë¶€ êµ¬í˜„ ë°©ì‹ì˜ ì˜í–¥ì—ì„œ ë²—ì–´ë‚  ìˆ˜ ìˆë‹¤.
2. ê¸°ì¡´ í´ë˜ìŠ¤ì— ìƒˆë¡œìš´ ë©”ì„œë“œê°€ ì¶”ê°€ë˜ë”ë¼ë„ ì˜í–¥ì„ ë°›ì§€ ì•ŠëŠ”ë‹¤.
3. ìœ„ ì½”ë“œì™€ ê°™ì´ ì „ë‹¬í´ë˜ìŠ¤ë¡œ êµ¬í˜„ì‹œ, íƒ€ì…ì´ ì¼ì¹˜í•˜ëŠ” ì–´ë–¤ êµ¬í˜„ì²´ì—ë„ ì ìš©ì´ ê°€ëŠ¥í•˜ë‹¤.
4. ê¸°ì¡´ ìƒì„±ìë“¤ê³¼ë„ í•¨ê»˜ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

### ë˜í¼ í´ë˜ìŠ¤
- InstrumentedSetì™€ ê°™ì´ ë‹¤ë¥¸ Set ì¸ìŠ¤í„´ë¥¼ ê°ì‹¸ê³  ìˆëŠ” í´ë˜ìŠ¤ë¥¼ ```ë˜í¼ í´ë˜ìŠ¤```ë¼ê³  í•œë‹¤.
- ë‹¤ë¥¸ Setì— ê³„ì¸¡ ê¸°ëŠ¥ì„ ë§ì”Œìš´ë‹¤ëŠ” ëœ»ì—ì„œ ```ë°ì½”ë ˆì´í„° íŒ¨í„´(Decorator pattern)```ì´ë¼ê³  í•œë‹¤.
- ì»´í¬ì§€ì…˜ê³¼ ì „ë‹¬ì˜ ì¡°í•©ì€ ë„“ì€ ì˜ë¯¸ë¡œ```ìœ„ì„```ì´ë¼ê³  ë¶€ë¥¸ë‹¤.

### ë˜í¼ í´ë˜ìŠ¤ì˜ ë‹¨ì 
- ë‹¨ì ì´ ê±°ì˜ ì—†ëŠ” í´ë˜ìŠ¤ì´ì§€ë§Œ ì½œë°±í”„ë ˆì„ì›Œí¬ì™€ ì–´ìš¸ë¦¬ì§€ ì•ŠëŠ”ë‹¤ëŠ” í•œê°€ì§€ ë‹¨ì ì„ ê°€ì§€ê³  ìˆë‹¤.
- ì½œë°± í”„ë ˆì„ì›Œí¬ì—ì„œëŠ” ìê¸° ìì‹ ì˜ ì°¸ì¡°ë¥¼ ë‹¤ë¥¸ ê°ì²´ì— ë„˜ê²¨ì„œ ë‹¤ìŒ í˜¸ì¶œë•Œ ì‚¬ìš©í•˜ë„ë¡ í•œë‹¤.
- ë‚´ë¶€ ê°ì²´ëŠ” **ë˜í¼í´ë˜ìŠ¤ì˜ ì¡´ì¬ë¥¼ ëª¨ë¥¸ë‹¤.**
- ê·¸ë˜ì„œ ë‚´ë¶€ ê°ì²´ëŠ” ë³¸ì¸ì˜ ì°¸ì¡°ë¥¼ ë„˜ê¸°ê²Œ ë˜ê³  ì½œë°±ë•ŒëŠ” **ë˜í¼ê°€ ì•„ë‹Œ ë‚´ë¶€ ê°ì²´ë¥¼ í˜¸ì¶œí•˜ê²Œ ëœë‹¤.**

ì´ëŸ¬í•œ ë¬¸ì œë¥¼ ```SELF ë¬¸ì œ```ë¼ê³  í•œë‹¤.

## ğŸ¯ ê·¸ë ‡ë‹¤ë©´ ì–¸ì œ ìƒì†ì„ ì¨ì•¼í•˜ëŠ” ê±¸ê¹Œ?
### ìƒì†
- ìƒì†ì€ is-a ê´€ê³„ì¼ ë•Œë§Œ í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.
- í•˜ìœ„ í´ë˜ìŠ¤ê°€ ìƒìœ„ í´ë˜ìŠ¤ì˜ "ì§„ì§œ" í•˜ìœ„íƒ€ì…(í•„ìˆ˜ êµ¬ì„±ìš”ì†Œ)ì¸ ìƒí™©ì—ì„œë§Œ ì“°ì—¬ì•¼ í•œë‹¤.

Bí´ë˜ìŠ¤ê°€ Aí´ë˜ìŠ¤ë¥¼ ìƒì†í• ë•Œ, "Bí´ë˜ìŠ¤ê°€ Aí´ë˜ìŠ¤ì˜ í•„ìˆ˜ êµ¬ì„±ìš”ì†Œì¸ê°€?"ë¥¼ ìë¬¸í•´ë³´ì.

- "ê·¸ë ‡ë‹¤"ë¼ê³  í™•ì‹ í•  ìˆ˜ ì—†ë‹¤ë©´ ì»´í¬ì§€ì…˜ì„ í™œìš©í•˜ì.

> ğŸ«  ì‚¬ì‹¤ is-a ê´€ê³„ì—ì„œ ìƒì†ì„ ì‚¬ìš©í•´ë„ ì•ˆì‹¬í•  ìˆ˜ ì—†ë‹¤.

> í•˜ìœ„í´ë˜ìŠ¤ì˜ íŒ¨í‚¤ì§€ê°€ ìƒìœ„í´ë˜ìŠ¤ì™€ ë‹¤ë¥´ê³ , ìƒìœ„ í´ë˜ìŠ¤ê°€ í™•ì¥ì„ ê³ ë ¤í•´ ì„¤ê³„ë˜ì–´ ìˆì§€ ì•Šë‹¤ë©´ ì—¬ì „íˆ ë¬¸ì œê°€ ë  ìˆ˜ ìˆë‹¤.

### ğŸ¥ ì •ë¦¬
- ìƒì†ì€ ì·¨ì•½ì ì´ ë§ìœ¼ë‹ˆ, ì½”ë“œ ì¬ì‚¬ìš©ì´ í•„ìš”í• ë•ŒëŠ” ì»´í¬ì§€ì…˜ê³¼ ì „ë‹¬ì„ ì‚¬ìš©í•˜ì.

### ğŸ“ Reference
[Self ë¬¸ì œ](https://stackoverflow.com/questions/28254116/wrapper-classes-are-not-suited-for-callback-frameworks)

[ë˜í¼í´ë˜ìŠ¤ì˜ ë‹¨ì ](https://icarus8050.tistory.com/75)
