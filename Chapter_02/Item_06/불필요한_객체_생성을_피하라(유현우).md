# item6 - **ë¶ˆí•„ìš”í•œ ê°ì²´ ìƒì„±ì„ í”¼í•˜ë¼**

ë™ì¼í•œ ê¸°ëŠ¥ì„ í•¨ì—ë„ ì—¬ëŸ¬ë²ˆ ìƒì„±í•˜ëŠ” ê²½ìš°ë“¤ì´ ìˆëŠ”ë° í•˜ë‚˜ì”© ì•Œì•„ë³´ì

## **1ï¸âƒ£**Â ë¬¸ìì—´

### ğŸ“ŒÂ ë¬¸ìì—´ ìƒì„± ë°©ë²•

```java
String hello1 = "hello";
String hello2 = new String("hello"); //ì´ ë°©ë²•ì€ ê¶Œì¥í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
```

### ğŸ˜®â€ğŸ’¨Â ê¶Œì¥í•˜ì§€ ì•ŠëŠ” ë°©ë²•ì„ ì‚¬ìš©í–ˆì„ ë•Œ ë¬¸ì œì 

**1. String ìƒì„±ìë¡œ ë“¤ì–´ê°€ëŠ” "hello" ìì²´ê°€ ì´ ìƒì„±ìë¡œ ë§Œë“¤ì–´ë‚´ë ¤ëŠ” Stringê³¼ ê¸°ëŠ¥ì ìœ¼ë¡œ ì™„ì „íˆ ë˜‘ê°™ë‹¤.**

**2.Â Javaì—ì„œ ë¬¸ìì—´ ë¦¬í„°ëŸ´ì„ ì €ì¥í•˜ëŠ” ë…ë¦½ëœ ì˜ì—­ì¸ String Constant Poolë¥¼ ì´ìš©í•œ ì¬ì‚¬ìš©ì„ í•˜ì§€ ëª»í•œë‹¤.**

### ğŸ’¬Â 2ë²ˆ ë¬¸ì œë¥¼ ì¡°ê¸ˆ ë” ë³´ì

Stringì€ ë¶ˆë³€ ê°ì²´ë¡œ **String Constant Poolë¥¼ í†µí•´ì„œ** `ì„±ëŠ¥`,Â `ë™ê¸°í™”`,Â `ìºì‹±`,Â `ë³´ì•ˆ`ì˜ ì´ì ì„ ì–»ê³  ìˆëŠ”ë° newë¡œ ìƒì„±í•˜ë©´ **heap ì˜ì—­ì— ì €ì¥ë˜ê¸° ë•Œë¬¸ì—** í™œìš©í•˜ì§€ ëª»í•œë‹¤.

- ê¶ê¸ˆí•˜ë©´ [ì—¬ê¸°](https://devlog-wjdrbs96.tistory.com/247)ë¥¼ ì°¸ê³ í•˜ì„¸ìš”

### í…ŒìŠ¤íŠ¸

```java
		@Test
    public void ë¬¸ìì—´_ë¹„êµ() {
        // when
        String hello = "hello";
        String hello2 = "hello";
        //TODO ì´ ë°©ë²•ì€ ê¶Œì¥í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
        String hello3 = new String("hello");

        //then
        assertThat(hello == hello3).isFalse();
        assertThat(hello.equals(hello2)).isTrue();
        assertThat(hello == hello2).isTrue();
        assertThat(hello == hello2).isTrue();
    }
```

## 2ï¸âƒ£Â  ì •ê·œí‘œí˜„ì‹

**ì •ê·œí‘œí˜„ì‹ìš© Pattern ì¸ìŠ¤í„´ìŠ¤ëŠ” ìƒì„± ë¹„ìš©ì´ ë†’ê³  í•œ ë²ˆ ì“°ê³  ë²„ë ¤ì ¸ì„œ ê³§ë°”ë¡œ ê°€ë¹„ì§€ ì»¬ë ‰ì…˜ ëŒ€ìƒì´ ëœë‹¤.**

- enumìœ¼ë¡œ íŒ¨í„´ ê°ì²´ë“¤ì„ ëª¨ì•„ì„œ ì‚¬ìš©í•˜ëŠ”ê±´ ì–´ë–¨ê¹Œìš”?

```java
public boolean isPhoneNumber(String phoneNumber) {
		return phoneNumber.matches("^\\d{3}-\\d{3,4}-\\d{4}$");
}
```

### ì •ì  ì´ˆê¸°í™”ë¥¼ í†µí•´ì„œ ì§ì ‘ ìƒì„±í•´ ìºì‹±í•´ë‘ë©´ ì¬ì‚¬ìš©ì‹œ ì„±ëŠ¥ì˜ ì´ì ì„ ì–»ì„ ìˆ˜ ìˆë‹¤.

- static final í•„ë“œë¡œ ì¶”ì¶œí•˜ë©´ì„œ ì´ë¦„ë„ ì–»ì„ ìˆ˜ ìˆê²Œ ë•Œë¬¸ì— ë¬´ìŠ¨ ì •ê·œí‘œí˜„ì‹ì¸ì§€ ì´í•´í•˜ê¸° ì‰½ë‹¤.

```java
public class Main {
    private static final Pattern PHONE_NUMBER_PATTERN =
									Pattern.compile("^\\d{3}-\\d{3,4}-\\d{4}$");

    public boolean isPhoneNumberCache(String phoneNumber) {
        return PHONE_NUMBER_PATTERN.matcher(phoneNumber).matches();
    }

		public static void main(String[] args) {
        Main main = new Main();
        List<String> phoneNumbers = IntStream.rangeClosed(1, 1000)
                .mapToObj(s -> "010-1234-5678")
                .collect(Collectors.toList());

        long start = System.nanoTime();
        List<String> result = phoneNumbers.stream()
                .filter(main::isPhoneNumberCache)
                .collect(Collectors.toList());
        long end = System.nanoTime();
        System.out.println(end - start);
    }
}
```

### ğŸ˜›Â ì •ê·œ í‘œí˜„ì‹ì„ matchesë§ê³  splitê³¼ replaceì—ì„œë„ ì‚¬ìš©ëœë‹¤.

### String.split(String regex)

Stringì˜ `split` ë©”ì„œë“œ ì£¼ì„ì„ ë³´ë©´ ì•„ë˜ 2ê°€ì§€ ì¤‘ì—ì„œ í¬í•¨ë˜ë©´ ë‚´ë¶€ì ì¸ ìµœì í™”ë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤.

1. ê¸¸ì´ê°€ **í•œ ê¸€ìì¸ ë¬¸ìì—´**ë¡œ, ì´ ë¬¸ìì—´ì´ ì •ê·œ í‘œí˜„ì‹ì—ì„œ ë©”íƒ€ ë¬¸ì(meta characters)ì¸ ".$|()[{^?\*+\" ì¤‘ í•˜ë‚˜ê°€ ì•„ë‹Œ ê²½ìš°
2. ê¸¸ì´ê°€ **ë‘ ê¸€ìì¸ ë¬¸ìì—´**ë¡œ, ì²« ë²ˆì§¸ ê¸€ìê°€ ë°±ìŠ¬ë˜ì‹œ(**`\`**)ì´ê³ , ë‘ ë²ˆì§¸ ê¸€ìê°€ ì•„ìŠ¤í‚¤(ASCII) ìˆ«ìë‚˜ ì•ŒíŒŒë²³ ë¬¸ìê°€ ì•„ë‹Œ ê²½ìš°

### ìœ„ì— ê²½ìš°ê°€ ì•„ë‹ˆë©´ ì •ê·œ í‘œí˜„ì‹ìœ¼ë¡œ ìµœì í™” í•˜ë©´ ëœë‹¤.

```java
Pattern.compile(regex).split(str)
```

### â—ï¸ì£¼ì˜í• ì 

split ìµœì í™”ê°€ ê°€ëŠ¥í•œ ê²½ìš° Pattern ê°ì²´ë¥¼ ìºì‹œì²˜ë¦¬í•˜ëŠ” ê²ƒë³´ë‹¤ ë¹ ë¥´ê²Œ ë‚˜ì™”ë‹¤.

**1ï¸âƒ£Â split ìµœì í™” - 2500000 ~ 2800000**

```java
public static void main(String[] args) {
        long start = System.nanoTime();
        for (int j = 0; j < 1000; j++) {
            String name = "ì•¼í˜¸,í¬í¬,ë©”ë¡±,ì›ƒê²¨?";
            name.split(",");
        }
        System.out.println(System.nanoTime() - start); // 2587458
    }
```

**2ï¸âƒ£Â Pattern ê°ì²´ ìºì‹œí•´ì„œ ì‚¬ìš©- 4300000 ~ 4800000**

```java
public class SplitCache {
    private static final Pattern SPLIT_PATTERN = Pattern.compile(",");

    public static void main(String[] args) {
        long start = System.nanoTime();
        for (int j = 0; j < 1000; j++) {
            String name = "ì•¼í˜¸,í¬í¬,ë©”ë¡±,ì›ƒê²¨?";
            SPLIT_PATTERN.split(name);
        }
        System.out.println(System.nanoTime() - start); //4816792
    }
}
```

### String.replace(String regex, String replacement)

```java
Pattern.compile(regex).matcher(str).replaceAll(repl)
```

## 3ï¸âƒ£Â **ì˜¤í† ë°•ì‹±(auto boxing)**

**ì˜¤í† ë°•ì‹±:** í”„ë¦¬ë¯¸í‹°ë¸Œ íƒ€ì…ì„ wrapper íƒ€ì…ìœ¼ë¡œ ë³€ê²½ì‹œ ë°œìƒ

**ì–¸ë°•ì‹±:** wrapper íƒ€ì…ì„ í”„ë¦¬ë¯¸í‹°ë¸Œ íƒ€ì…ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” ê³¼ì •

### â—ï¸ì˜¤í† ë°•ì‹±ì˜ ë¬¸ì œì 

**ì˜¤í† ë°•ì‹±**,Â **ì–¸ ë°•ì‹±**Â ì„ ëŸ°íƒ€ì„ì— JVM ì´ ìë™ìœ¼ë¡œ ì²˜ë¦¬í•˜ëŠ”ë° ë¶ˆí•„ìš”í•˜ê²Œ ì˜¤í† ë°•ì‹±ì´ ì¼ì–´ë‚˜ëŠ” ê²½ìš° Wrapper í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ê°€ ê³„ì† ë§Œë“¤ì–´ì§€ê²Œ ëœë‹¤.

```java
public class Sum {
   private static long sum() {
      Long sum = 0L; // longì´ ì•„ë‹ˆë¼ Longì´ë‹¤.
      for (long i = 0; i <= Integer.MAX_VALUE; i++)
         sum += i; // ì˜¤í† ë°•ì‹± ë°œìƒ
      return sum;
   }

   public static void main(String[] args) {
      long start = System.nanoTime();
      long x = sum();
      long end = System.nanoTime();
      System.out.println((end - start) / 1_000_000. + " ms.");
      System.out.println(x);
   }
}
```

**ì˜¤í† ë°•ì‹±ì´ ì¼ì–´ë‚˜ì§€ ì•Šê²Œ ìˆ˜ì •í•˜ë©´ ì„±ëŠ¥ì´ ê°œì„ ëœë‹¤.**
