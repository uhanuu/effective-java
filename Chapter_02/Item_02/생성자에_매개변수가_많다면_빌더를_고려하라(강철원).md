# ğŸš€ Item 2 ìƒì„±ìì— ë§¤ê°œë³€ìˆ˜ê°€ ë§ë‹¤ë©´ ë¹Œë”ë¥¼ ê³ ë ¤í•˜ë¼

<br>
<br>

ì •ì  íŒ©í„°ë¦¬ì™€ ìƒì„±ìì—ëŠ” ë˜‘ê°™ì€ ì œì•½ì´ í•˜ë‚˜ ìˆìŠµë‹ˆë‹¤. ë°”ë¡œ ì„ íƒì  ë§¤ê°œë³€ìˆ˜ê°€ ë§ì„ ë•Œ ì ì ˆí•˜ê²Œ ëŒ€ì‘í•˜ê¸° ì–´ë µë‹¤ëŠ” ì  ì…ë‹ˆë‹¤.        
ì´ë•Œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ê²ƒì´ ë°”ë¡œ `ë¹Œë”`ì…ë‹ˆë‹¤.  

ê·¸ëŸ°ë° ë³¸ê²©ì ìœ¼ë¡œ ì„¤ëª…í•˜ê¸°ì— ì™œ ì„ íƒì  ë§¤ê°œë³€ìˆ˜ê°€ ë§ì„ ë•Œ ëŒ€ì‘ì´ í˜ë“¤ê³  ë¹Œë”ë¥¼ ì‚¬ìš©í•˜ë©´ ëŒ€ì‘í•˜ê¸° í¸í•œì§€ ì•ì„œ ì˜ˆì‹œë¥¼ í†µí•´ ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.    

---

ìš°ë¦¬ê°€ ì„œë¸Œì›¨ì´ì²˜ëŸ¼ ì»¤ìŠ¤í…€ ìƒŒìœ¼ë’¤ì¹˜ ë§Œë“œëŠ” ê°€ê²Œì— ê°”ë‹¤ê³  í•´ë´…ì‹œë‹¤.  ì—¬ê¸°ì—ì„œëŠ” ë¹µ ì¢…ë¥˜, ì† ì¬ë£Œ, ì†ŒìŠ¤, ì¶”ê°€ í†µí•‘ ë“±ì„ ê³ ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.  ê°„ë‹¨í•œ ìƒŒë“œìœ„ì¹˜ë¶€í„° ì‹œì‘í•´ì„œ, ì—¬ëŸ¬ë¶„ì´ ì›í•˜ëŠ” ëŒ€ë¡œ ë§ì€ ì„ íƒì„ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.    

ì´ë•Œ ìƒŒë“œìœ„ì¹˜ë¥¼ ì£¼ë¬¸í•˜ëŠ” ë°©ë²•ì´ ë‘ ê°€ì§€ê°€ ìˆë‹¤ê³  ê°€ì •í•´ë´…ì‹œë‹¤.  

ì²« ë²ˆì§¸ ë°©ë²•ì€ ê·¸ëƒ¥ í•˜ë‚˜ì”© ì›í•˜ëŠ” ì¬ë£Œë¥¼ ë§í•˜ëŠ” ê²ƒì´ê³  ë‘ ë²ˆì¬ëŠ” ì£¼ë¬¸ì„œë¥¼ ë°›ëŠ” ë°©ë²•ì…ë‹ˆë‹¤. 

ë¨¼ì € ì²« ë²ˆì§¸ ë°©ë²•ìœ¼ë¡œ ì£¼ë¬¸í•´ë´…ì‹œë‹¤.  
ìƒŒë“œìœ„ì¹˜ë¥¼ ì£¼ë¬¸í•  ë•Œë§ˆë‹¤. ì›í•˜ëŠ” ëª¨ë“  ì¬ë£Œë¥¼ ì¼ì¼ì´ ë§í•´ì•¼ í•©ë‹ˆë‹¤.  ë¹µì€ í”Œë«ë¸Œë ˆë“œ, ì¹˜ì¦ˆëŠ” ì•„ë©”ë¦¬ì¹¸, ì†ŒìŠ¤ëŠ” ìŠ¤ìœ„íŠ¸ ì–´ë‹ˆì–¸ê³¼ ìŠ¤ìœ„íŠ¸ ì¹ ë¦¬ ì•„ì±„ëŠ” í• ë¼í”¼ë‡¨, í”¼í´, ì˜¬ë¦¬ë¸Œ, ì–‘ìƒì¶”, ë§Œì•½ ì¬ë£Œê°€ ë” ë§ì•„ì§€ê±°ë‚˜, ëª‡ ê°œë¥¼ ë¹¼ê³  ì‹¶ìœ¼ë©´ ë§¤ë²ˆ ì£¼ë¬¸ì´ ë³µì¡í•´ì§‘ë‹ˆë‹¤.  

ì´ì œ ë‘ ë²ˆì§¸ ë°©ë²•ìœ¼ë¡œ ì£¼ë¬¸í•´ë´…ì‹œë‹¤.  
ì—¬ëŸ¬ë¶„ì´ ìƒŒë“œìœ„ì¹˜ë¥¼ ë§Œë“¤ê¸° ìœ„í•œ "ì£¼ë¬¸ì„œ"ë¥¼ ë°›ìŠµë‹ˆë‹¤. ì´ ì£¼ë¬¸ì„œì—ì„œ, ì²´í¬ ë°•ìŠ¤ë‚˜ ë“œë¡­ë‹¤ìš´ ë©”ë‰´ë¥¼ í†µí•´ ì›í•˜ëŠ” ì¬ë£Œë¥¼ ì„ íƒí•©ë‹ˆë‹¤.  ì´ë•Œ ì£¼ë¬¸ì„œì—ëŠ” ì¸ê¸° ìˆëŠ” í•„ìˆ˜ ì¬ë£Œ ì²´í¬ë€ ë˜ëŠ” ì´ë²ˆë‹¬ì— ì¶”ì²œí•˜ëŠ” í•„ìˆ˜ ì¬ë£Œë¼ëŠ” ì²´í¬ë€ì´ ìˆì–´ì„œ ì²˜ìŒ ìƒŒë“œìœ„ì¹˜ë¥¼ ì£¼ë¬¸í•˜ê±°ë‚˜ ë³µì¡í•˜ê³  ë§¤ë²ˆí•˜ë‚˜í•˜ë‚˜ ì„ íƒí•˜ëŠ” ê²Œ ê·€ì°®ì€ ì‚¬ëŒë“¤ì´ í˜ë“¤ì§€ ì•Šê²Œ ë„ì™€ì¤ë‹ˆë‹¤. ë¿ë§Œì•„ë‹ˆë¼ ì¶”ê°€ì ìœ¼ë¡œ ë‚´ê°€ í˜ì´ì»¨ì´ë‚˜ ì•„ë³´ì¹´ë„ ê°™ì€ ê²ƒì„ ì¢‹ì•„í•˜ë©´ ì¶”ê°€í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.  

ì—¬ê¸°ì„œ ì²« ë²ˆì§¸ ì£¼ë¬¸ ë°©ë²•ì€ ë§ì€ ë§¤ê°œë³€ìˆ˜ë¥¼ ê°–ëŠ” ìƒì„±ìë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒê³¼ ë¹„ìŠ·í•©ë‹ˆë‹¤. ë§¤ê°œë³€ìˆ˜ê°€ ë§ì•„ì§ˆìˆ˜ë¡, ìƒì„±ìëŠ” í˜¸ì¶œì´ ë³µì¡í•´ì§€ê³ , ì‹¤ìˆ˜í•  ê°€ëŠ¥ì„±ë„ ë†’ì•„ì§‘ë‹ˆë‹¤. ë˜í•œ, ì–´ë–¤ ë§¤ê°œë³€ìˆ˜ê°€ ì–´ë–¤ ê°’ì„ ì˜ë¯¸í•˜ëŠ”ì§€ í˜¼ë™í•˜ê¸° ì‰½ìŠµë‹ˆë‹¤.  ë¬¼ë¡  ì •ì  íŒ©í„°ë¦¬ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•´ë„ ì´ì™€ í¬ê²Œ ë‹¤ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.  

ë°˜ë©´ì— ì£¼ë¬¸ì„œë¥¼ ì‚¬ìš©í•œ ë‘ ë²ˆì§¸ ë°©ë²•ì€ ë¹Œë” íŒ¨í„´ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒê³¼ ìœ ì‚¬í•©ë‹ˆë‹¤. ë¹Œë” íŒ¨í„´ì€ ì—¬ëŸ¬ë¶„ì´ ê°ì²´ë¥¼ ë‹¨ê³„ë³„ë¡œ êµ¬ì„±í•  ìˆ˜ ìˆê²Œ í•´ì£¼ë©°, ê° ë‹¨ê³„ì—ì„œëŠ” ëª…í™•í•œ ë©”ì„œë“œ í˜¸ì¶œì„ í†µí•´ í•„ìš”í•œ ê°’ì„ ì„¤ì •í•©ë‹ˆë‹¤. ì´ ë°©ë²•ì€ ì½”ë“œë¥¼ ë” ì½ê¸° ì‰½ê²Œ ë§Œë“¤ê³ , ì‹¤ìˆ˜ë¥¼ ì¤„ì—¬ì¤ë‹ˆë‹¤.  í•„ìš” ì—†ëŠ” ê°’ì€ ì„¤ì •í•˜ì§€ ì•Šì•„ë„ ë˜ê³ , í•„ìš”í•œ ê°’ë§Œ ëª…í™•í•˜ê²Œ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  

---

ì´ì œ ì½”ë“œë¥¼ í†µí•´ ì•Œì•„ë´…ì‹œë‹¤.  

>ì¼ë°˜ì ìœ¼ë¡œ ìƒì„±ìë¥¼ ì‚¬ìš©í•˜ë©´ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.
```java
public class GameCharacter {
    private final String name;
    private final String job;
    private final int level;
    private final int healthPoints;
    private final int manaPoints;
    private final int defensePoints;

    public GameCharacter(String name, String job, int level, int healthPoints, int manaPoints, int defensePoints) {
        this.name = name;
        this.job = job;
        this.level = level;
        this.healthPoints = healthPoints;
        this.manaPoints = manaPoints;
        this.defensePoints = defensePoints;
    }
   
   // ...
}
```

ì´ëŸ° ìƒì„±ì ë°©ì‹ì€ ë§¤ê°œë³€ìˆ˜ê°€ ë§ì•„ì§ˆìˆ˜ë¡ ì½”ë“œë¥¼ ì½ê³  ì´í•´í•˜ëŠ” ê²ƒì´ ì–´ë ¤ì›Œì§‘ë‹ˆë‹¤. ë˜í•œ, ëª¨ë“  ìºë¦­í„°ê°€ ì†ì„±ì„ ë‹¤ë¥´ê²Œ ê°€ì§ˆ í•„ìš”ê°€ ì—†ëŠ”ë°ë„ ë¶ˆêµ¬í•˜ê³ , ëª¨ë“  ê°’ì„ ì„¤ì •í•´ì£¼ì–´ì•¼ í•˜ëŠ” ë¶ˆí¸í•¨ì´ ìˆìŠµë‹ˆë‹¤.

ì´ë•Œ ë¹Œë”ë¥¼ ì‚¬ìš©í•´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```java
public class GameCharacter {
    private final String name;
    private final String job;
    private final int level;
    private final int healthPoints;
    private final int manaPoints;
    private final int defensePoints;

    private GameCharacter(Builder builder) {
        this.name = builder.name;
        this.job = builder.job;
        this.level = builder.level;
        this.healthPoints = builder.healthPoints;
        this.manaPoints = builder.manaPoints;
        this.defensePoints = builder.defensePoints;
    }

    public static class Builder {
        // í•„ìˆ˜ ë§¤ê°œë³€ìˆ˜
        private final String name;
        private final String job;

        // ì„ íƒì  ë§¤ê°œë³€ìˆ˜ - ê¸°ë³¸ê°’ìœ¼ë¡œ ì´ˆê¸°í™”
        private int level = 1;
        private int healthPoints = 100;
        private int manaPoints = 100;
        private int defensePoints = 10;

        public Builder(String name, String job) {
            this.name = name;
            this.job = job;
        }

        public Builder level(int val) {
            level = val;
            return this;
        }

        public Builder healthPoints(int val) {
            healthPoints = val;
            return this;
        }

        public Builder manaPoints(int val) {
            manaPoints = val;
            return this;
        }

        public Builder defensePoints(int val) {
            defensePoints = val;
            return this;
        }

        public GameCharacter build() {
            return new GameCharacter(this);
        }
    }
}
```

ìœ„ ì½”ë“œì²˜ëŸ¼ ë¹Œë“œë¥¼ ì‚¬ìš©í•œë‹¤ë©´ ì•„ë˜ ì½”ë“œì™€ ê°™ì´ ìºë¦­í„°ë¥¼ ìƒì„¤í•  ë•Œ, í•„ìš”í•œ ì†ì„±ë§Œ ì„ íƒì ìœ¼ë¡œ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```java
GameCharacter warrior = new GameCharacter.Builder("Warrior", "Fighter")
    .level(10)
    .healthPoints(200)
    .defensePoints(50)
    .build();
```

ì´ ì˜ˆì œì—ì„œëŠ” `GameCharacter` ê°ì²´ë¥¼ ìƒì„±í•˜ê¸° ìœ„í•´ ë¹Œë” í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤. ë¹Œë” í´ë˜ìŠ¤ëŠ” í•„ìš”í•œ ì†ì„±ì„ ì„¤ì •í•˜ëŠ” ë©”ì„œë“œë“¤ì„ ì œê³µí•˜ê³ , ìµœì¢…ì ìœ¼ë¡œ `build()` ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ì´ ë°©ì‹ì€ ì½”ë“œë¥¼ ë”ìš± ëª…í™•í•˜ê²Œ ë§Œë“¤ê³ , ê°ì²´ ìƒì„± ê³¼ì •ì—ì„œ ë°œìƒí•  ìˆ˜ ìˆëŠ” ì˜¤ë¥˜ë¥¼ ì¤„ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<br>

ì—¬ê¸°ì„œ ë” ë‚˜ì•„ê°€ë©´ `ë¹Œë” íŒ¨í„´ì€ ê³„ì¸µì ìœ¼ë¡œ ì„¤ê³„ëœ í´ë˜ìŠ¤ì™€ í•¨ê¼ ì“°ê¸°ì— ì¢‹ìŠµë‹ˆë‹¤.`     
ì¶”ìƒ í´ë˜ìŠ¤ì—ì„œëŠ” ì¶”ìƒë¹Œë”ë¥¼, êµ¬ì²´ í´ë˜ìŠ¤ì—ì„œëŠ” êµ¬ì²´ ë¹Œë”ë¥¼ ê°–ê²Œí•¨ìœ¼ë¡œì¨ ê³„ì¸µì ìœ¼ë¡œ ë¹Œë”ë¥¼ ë¹Œë“œ í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.
ë‹¤ìŒì€ í”¼ìë¼ëŠ” ì¶”ìƒ í´ë˜ìŠ¤ì™€ ì´ë¥¼ ìƒì†í•˜ëŠ” ë‹¤ì–‘í•œ í”¼ìë“¤ì„ ì½”ë“œë¡œ í‘œí˜„í•´ì„œ ê³„ì¸µêµ¬ì¡°ì˜ ë¹Œë” íŒ¨í„´ ì ìš©ì‚¬ë¡€ë¥¼ í•¨ê»˜ ì‚´í´ë´…ì‹œë‹¤.

>Pizza
```java
package me.catsbi.effectivejavastudy.item2.domain;

import java.util.EnumSet;
import java.util.Objects;
import java.util.Set;

public abstract class Pizza {
    public enum Topping {HAM, MUSHROOM, ONION, PEPPER, SAUSAGE}

    final Set<Topping> toppings;

    abstract static class Builder<T extends Builder<T>> {
        EnumSet<Topping> toppings = EnumSet.noneOf(Topping.class);

        public T addTopping(Topping topping) {
            toppings.add(Objects.requireNonNull(topping));
            return self();
        }

        abstract Pizza build();

        protected abstract T self();
    }

    Pizza(Builder<?> builder) {
        toppings = builder.toppings.clone();
    }
}
```
- `EnumSet`ì€ `Cloneable`ì„ êµ¬í˜„í•´ì„œ `clone` ë©”ì†Œë“œë¥¼ í†µí•œ ë³µì‚¬ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤. 
- êµ¬í˜„ì²´ í´ë˜ìŠ¤ì—ì„œëŠ” `self()` ë©”ì„œë“œë¡œ ìê¸°ìì‹ ì„ ë°˜í™˜í•˜ë„ë¡ í•©ë‹ˆë‹¤. ì´ë¥¼ ì´ìš©í•´ í•˜ìœ„ í´ë˜ìŠ¤ì—ì„œëŠ” í˜•ë³€í™˜ í•˜ì§€ì•Šê³  ë©”ì„œë“œ ì—°ì‡„ë¥¼ ì§€ì›í•  ìˆ˜ ìˆë‹¤.  
    - `self` íƒ€ì…ì´ ì—†ëŠ” ìë°”ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì´ëŸ° ìš°íšŒ ë°©ë²•ì„ ì‹œë®¬ë ˆì´íŠ¸í•œ ì…€í”„ íƒ€ì…(simulated self-type)ê´€ìš©êµ¬ë¼ í•©ë‹ˆë‹¤. 

ë‹¤ìŒì€ ì´ëŸ¬í•œ ì¶”ìƒ í´ë˜ìŠ¤ Pizzaë¥¼ êµ¬í˜„í•˜ëŠ” í”¼ì 2ê°œë¥¼ ì‘ì„±í•´ë´…ì‹œë‹¤.

>ë‰´ìš•í”¼ì
>í¬ê¸°(size)ë¥¼ í•„ìˆ˜ë¡œ ë°›ìŠµë‹ˆë‹¤.
```java
package me.catsbi.effectivejavastudy.item2.domain;

public class NyPizza extends Pizza {
    public enum Size {SMALL, MEDIUM, LARGE}

    private final Size size;

    public static class Builder extends Pizza.Builder<Builder> {
        private final Size size;

        public Builder(Size size) {
            this.size = size;
        }

        @Override
        NyPizza build() {
            return new NyPizza(this);
        }

        @Override
        protected Builder self() {
            return this;
        }
    }

    private NyPizza(Builder builder) {
        super(builder);
        size = builder.size;
    }
}
```

<br>

>ì¹¼ì´ˆë„¤ í”¼ì
>ì†ŒìŠ¤ë¥¼ ë„£ì„ì§€ ì„ íƒ(saucelnside)í•˜ëŠ” ë§¤ê°œë³€ìˆ˜ë¥¼ í•„ìˆ˜ë¡œ ë°›ìŠµë‹ˆë‹¤.
```java
package me.catsbi.effectivejavastudy.item2.domain;

public class Calzone extends Pizza {
    private final boolean sauceInside;

    public static class Builder extends Pizza.Builder<Builder> {
        private boolean sauceInside = false;

        public Builder sauceInside() {
            this.sauceInside = true;
            return this;
        }

        @Override
        Calzone build() {
            return new Calzone(this);
        }

        @Override
        protected Builder self() {
            return this;
        }
    }

    private Calzone(Builder builder) {
        super(builder);
        this.sauceInside = builder.sauceInside;
    }
}
```

í”¼ìì˜ í•˜ìœ„ í´ë˜ìŠ¤ì¸ ì¹¼ì¡°ë„¤í”¼ìì™€, ë‰´ìš•í”¼ìëŠ” ë¹Œë”ê°€ ì •ì˜í•œ `build` ë©”ì„œë“œëŠ” í•´ë‹¹í•˜ëŠ” êµ¬ì²´ í•˜ìœ„ í´ë˜ìŠ¤ë¥¼ ë°˜í™˜í•˜ë„ë¡ ì„ ì–¸í•©ë‹ˆë‹¤.     
`NyPizza.Builder`ëŠ” `NyPizza`ë¥¼ ë°˜í™˜í•˜ê³  `Calzone.Builder` ëŠ” `Calzone`ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.    

ì´ë ‡ê²Œ í•˜ìœ„ í´ë˜ìŠ¤ì˜ ë©”ì„œë“œê°€ ìƒìœ„ì˜ ë©”ì„œë“œê°€ ì •ì˜í•œ ë°˜í™˜ íƒ€ì…ì´ ì•„ë‹ˆë¼ ê·¸ í•˜ìœ„ íƒ€ì…ì„ ë°˜í™˜í•˜ëŠ” ê¸°ëŠ¥ì„ ê³µë³€ ë°˜í™˜ íƒ€ì´í•‘(covariant return typing) ì´ë¼ í•©ë‹ˆë‹¤.    
ì´ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë©´ í´ë¼ì´ì–¸íŠ¸ê°€ í˜•ë³€í™˜ì— ì‹ ê²½ì“°ì§€ ì•Šì•„ë„ ë©ë‹ˆë‹¤.     
ê²Œë‹¤ê°€ ì•„ì´ë””ë‚˜, ì¼ë ¨ë²ˆí˜¸ì™€ ê°™ì€ íŠ¹ì • í•„ë“œëŠ” ë¹Œë”ê°€ ì•Œì•„ì„œ ì±„ìš°ê²Œ í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.    

í•˜ì§€ë§Œ,  ë‹¨ì ë„ ì¡´ì¬í•©ë‹ˆë‹¤. ì½”ë“œë§Œ ë´ë„ ì•Œë‹¤ì‹œí”¼ ì‘ì„±í•´ì•¼ í•˜ëŠ” ì½”ë“œì˜ ì–‘ì´ ëŠ˜ì–´ë‚©ë‹ˆë‹¤. ì¦‰ ì½”ë“œì‘ì„±ì— ë¹„ìš©ì´ ë” ì»¤ì§‘ë‹ˆë‹¤. ê·¸ë¦¬ê³  í•„ë“œì˜ ìˆ˜ê°€ ì ì„ìˆ˜ë¡ ê°€ì¹˜ê°€ ë–¨ì–´ì§€ëŠ”ë° ìµœì†Œ 4ê°œ ì´ìƒì€ ë˜ì•¼ ì“¸ë§Œí•©ë‹ˆë‹¤.  í•˜ì§€ë§Œ, ìœ ì§€ë³´ìˆ˜ë° ê¸°ëŠ¥ì¶”ê°€ë¥¼ í•˜ë‹¤ë³´ë©´ ë³€ìˆ˜ëŠ” ê³„ì†í•´ì„œ ëŠ˜ì–´ë‚˜ê³  ê·¸ë ‡ê¸°ì— ë’¤ëŠ¦ê²Œ ì‘ì—…ì„ í•˜ëŠ” ê²ƒë³´ë‹¤ ì²˜ìŒë¶€í„° ë¹Œë”íŒ¨í„´ì„ ì ìš©í•˜ëŠ”ê²Œ ë¹„ìš©ì„ ì•„ë‚„ìˆ˜ ìˆì„ì§€ë„ ëª¨ë¥´ë‹ˆ ì´ ë¶€ë¶„ì€ ì˜ ê³ ë ¤í•´ë³´ëŠ”ê²Œ ì¢‹ìŠµë‹ˆë‹¤.
